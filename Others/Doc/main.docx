ماژول main:

خلاصه:
این ماژول در‌واقع نقش ارتباط بین روتر ها و پردازنده هر روتر با روتر مربطه اش را انجام می‌دهد. در‌واقع ورودی ها و خروجی های هر پورت روترها را از روتر یا پردازه ای که باید می‌گیرد و در روتر مقصد می‌گذارد. همچنین تمام instance های روترها و پردازنده‌ها درون این ماژول قرار دارند و در نتیجه فایل‌های ورودی را نیز این ماژول می‌خواند و پردازش می‌کند.
جزئییات:
این ماژول ابتدا ورودی‌ها را از فایل می‌خواند. برای این قسمت سعی کردیم از دستور $readmemh  استفاده کنیم تا قالبیت سنتز داشته باشد. سپس اطلاعات خوانده شده را در آرایه هایی دسته بندی می‌کنیم. پس از این به اندازه حداکثر روتر هایی که در فایل پارامتر مشخص شده با استفاده از generate block ، از router و traffic نمونه می‌گیریم. هر کدام از  این نمونه‌ها با یک state machine کار میکنند و state آن‌ها از طریق این ماژول بیرونی main به وسیله ورودی که از پورت op اشان می‌گیرند، کنترل می‌شود.
پس از این فرآیند‌ها این ماژول مانند یک state machine عمل می‌کند که سر هر لبه clock یا reset تغییر وضعیت می‌دهد. حالت‌های آن و فعالیت‌های مربوط به هر بخش این‌گونه است:
InitState: این حالت اولیه ایست که هر بار اگر reset ۱ شود به این حالت باز‌می‌گردیم و تمام کار‌های اولیه را انجام می‌دهد مانند ورودی خواندن از فایل.
وضعیت روتر‌ها:  تمام روتر ها را به وضعیت nop می‌بریم. 
وضعیت پردازنده‌ها:  تمام پردازنده‌ها را به حالت nop می‌بریم.
وضعیت بعدی خود ماژول: به حالت InitTraffic می‌رویم.
InitTraffic: در این حالت به تمام پردازنده‌ها تعداد ترافیک دریافتیشان را می‌دهیم و آن هارا آماده اجرای دستورات بعدی می‌کنیم. 
وضعیت روتر‌ها:  تمام روتر ها را به وضعیت nop می‌بریم. 
وضعیت پردازنده‌ها:  تمام پردازنده‌ها را به حالت Init می‌بریم.
وضعیت بعدی خود ماژول: به حالت FillTraffic می‌رویم.

